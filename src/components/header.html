<!-- Header común para todas las páginas -->
<header
  class="header"
  role="banner"
  aria-label="Encabezado principal de RiffZone Music Store"
>
  <div class="header-bg"></div>
  <div class="header-container">
    <!-- Botón hamburguesa solo visible en móvil -->
    <button
      class="hamburger"
      id="hamburgerBtn"
      aria-label="Abrir menú de navegación"
      style="display: none"
    >
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
    <div class="logo-section" aria-label="Logo de RiffZone Music Store">
      <a href="/pages/index.html" class="logo-link">
        <img
          src="../assets/images/logo RiffZone.png"
          alt="Logo de RiffZone Music Store"
        />
        <h1 class="store-name">RiffZone Music Store</h1>
      </a>
    </div>
    <!-- barra de navegación principal (escritorio) -->
    <nav
      class="nav-header desktop-nav"
      role="navigation"
      aria-label="barra de navegación principal"
    >
      <ul class="nav-list" role="menubar">
        <li role="none">
          <a
            href="../pages/servicios.html"
            role="menuitem"
            aria-label="Servicio"
            ><i class="bi bi-tools"></i> Servicio</a
          >
        </li>
        <li role="none">
          <a href="../pages/contact.html" role="menuitem" aria-label="Contacto"
            ><i class="bi bi-envelope"></i> Contacto</a
          >
        </li>
        <li role="none">
          <a
            href="/pages/sobre-nosotros.html"
            role="menuitem"
            aria-label="Sobre Nosotros"
            ><i class="bi bi-info-circle"></i> Sobre Nosotros</a
          >
        </li>
      </ul>
    </nav>
    <!-- icono carrito y login/usuario -->
    <div class="user-actions nav-list">
      <a
        href="/pages/carrito.html"
        aria-label="Carrito de compras"
        class="cart-link nav-link"
      >
        <i class="bi bi-cart-plus"></i>
        <span class="cart-counter" id="cart-count">0</span>
      </a>
      <span id="userWelcome" class="greeting" style="display: none"
        >Hola, <span id="userName"></span
      ></span>
      <button
        class="login-button"
        id="loginBtn"
        data-bs-toggle="modal"
        data-bs-target="#loginModal"
        aria-label="Iniciar sesión en la tienda RiffZone Music Store"
      >
        <i class="bi bi-person" aria-hidden="true"></i> Iniciar Sesión
      </button>
      <button
        class="login-button"
        id="logoutBtn"
        style="display: none"
        aria-label="Cerrar sesión en la tienda RiffZone Music Store"
      >
        Cerrar sesión
      </button>
    </div>
  </div>
  <!-- Menú móvil oculto por defecto -->
  <nav class="mobile-nav" id="mobileNav" aria-label="Menú móvil de navegación">
    <ul>
      <li>
        <a href="../pages/servicios.html"
          ><i class="bi bi-tools"></i> Servicio</a
        >
      </li>
      <li>
        <a href="../pages/contact.html"
          ><i class="bi bi-envelope"></i> Contacto</a
        >
      </li>
      <li>
        <a href="/pages/sobre-nosotros.html"
          ><i class="bi bi-info-circle"></i> Sobre Nosotros</a
        >
      </li>
    </ul>
  </nav>
  <!-- Modal de inicio de sesión -->
  <div
    class="modal fade"
    id="loginModal"
    tabindex="-1"
    aria-labelledby="loginModalLabel"
    aria-hidden="true"
    aria-modal="true"
  >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <form id="loginForm" aria-label="Formulario de inicio de sesión">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="loginModalLabel">
              Iniciar Sesión
            </h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Cerrar ventana de inicio de sesión"
            ></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="loginEmail" class="form-label">Email</label>
              <input
                type="email"
                class="form-control"
                id="loginEmail"
                aria-required="true"
                aria-label="Correo electrónico"
                autocomplete="username"
                required
              />
            </div>
            <div class="mb-3">
              <label for="loginPassword" class="form-label">Contraseña</label>
              <div class="input-group">
                <input
                  type="password"
                  class="form-control"
                  id="loginPassword"
                  aria-required="true"
                  aria-label="Contraseña"
                  autocomplete="current-password"
                  required
                />
                <button
                  type="button"
                  class="btn btn-outline-secondary"
                  id="togglePassword"
                  tabindex="-1"
                  aria-label="Mostrar u ocultar contraseña"
                >
                  <i class="bi bi-eye" id="togglePasswordIcon"></i>
                </button>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-secondary" aria-label="Entrar">
              Entrar
            </button>
            <button
              type="button"
              class="btn btn-primary"
              aria-label="Ir a crear nueva cuenta"
              onclick="window.location.href='register.html'"
            >
              Crear Usuario
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</header>
<script>
  // Mostrar/ocultar menú hamburguesa y mobile-nav
  (function () {
    function toggleMobileNav() {
      var nav = document.getElementById("mobileNav");
      nav.classList.toggle("open");
    }
    var hamburger = document.getElementById("hamburgerBtn");
    if (hamburger) {
      hamburger.addEventListener("click", toggleMobileNav);
    }
    // Mostrar el botón hamburguesa solo en móvil
    function checkHamburger() {
      if (window.innerWidth <= 900) {
        hamburger && (hamburger.style.display = "flex");
      } else {
        hamburger && (hamburger.style.display = "none");
        var nav = document.getElementById("mobileNav");
        nav && nav.classList.remove("open");
      }
    }
    window.addEventListener("resize", checkHamburger);
    document.addEventListener("DOMContentLoaded", checkHamburger);
    checkHamburger();
  })();
  // Mostrar/ocultar contraseña en el login
  document.addEventListener("DOMContentLoaded", function () {
    var toggleBtn = document.getElementById("togglePassword");
    var passwordInput = document.getElementById("loginPassword");
    var icon = document.getElementById("togglePasswordIcon");
    if (toggleBtn && passwordInput && icon) {
      toggleBtn.addEventListener("click", function () {
        if (passwordInput.type === "password") {
          passwordInput.type = "text";
          icon.classList.remove("bi-eye");
          icon.classList.add("bi-eye-slash");
        } else {
          passwordInput.type = "password";
          icon.classList.remove("bi-eye-slash");
          icon.classList.add("bi-eye");
        }
      });
    }
  });
</script>
