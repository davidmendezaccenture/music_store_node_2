<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Registro de Usuario</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/header.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
    />
  </head>
  <body>
    <!-- Cabecera de la página -->
    <div id="header-placeholder"></div>
    <main class="zona-registro">
      <div class="registro-contenedor">
        <div class="registro-box">
          <h2 class="registro-titulo">
            <span>Crear cuenta</span>
          </h2>
          <form id="registroForm" novalidate>
            <!-- Nombre -->
            <div class="mb-3">
              <label for="nombre" class="form-label">Nombre *</label>
              <input
                type="text"
                class="form-control"
                id="nombre"
                name="nombre"
                required
                aria-required="true"
                aria-describedby="nombreError"
                autocomplete="given-name"
              />
              <div id="nombreError" class="invalid-feedback" role="alert"></div>
            </div>

            <!-- Apellidos -->
            <div class="mb-3">
              <label for="apellidos" class="form-label">Apellidos *</label>
              <input
                type="text"
                class="form-control"
                id="apellidos"
                name="apellidos"
                required
                aria-required="true"
                aria-describedby="apellidosError"
                autocomplete="family-name"
              />
              <div
                id="apellidosError"
                class="invalid-feedback"
                role="alert"
              ></div>
            </div>

            <!-- Teléfono -->
            <div class="mb-3">
              <label for="telefono" class="form-label">Teléfono *</label>
              <input
                type="tel"
                class="form-control"
                id="telefono"
                name="telefono"
                pattern="[0-9]{9,15}"
                required
                aria-required="true"
                aria-describedby="telefonoHelp telefonoError"
                autocomplete="tel"
              />
              <div id="telefonoHelp" class="form-text">
                Solo números, sin espacios ni símbolos
              </div>
              <div
                id="telefonoError"
                class="invalid-feedback"
                role="alert"
              ></div>
            </div>

            <!-- País -->
            <div class="mb-3">
              <label for="pais" class="form-label">País *</label>
              <select
                class="form-select"
                id="pais"
                name="pais"
                required
                aria-required="true"
                aria-describedby="paisError"
                aria-label="Selecciona un país"
              >
                <option value="">Selecciona un país</option>
                <option>España</option>
                <option>México</option>
                <option>Argentina</option>
                <option>Colombia</option>
                <option>Otro</option>
              </select>
              <div id="paisError" class="invalid-feedback" role="alert"></div>
            </div>

            <!-- Región -->
            <div class="mb-3">
              <label for="region" class="form-label">Región / Estado *</label>
              <input
                type="text"
                class="form-control"
                id="region"
                name="region"
                required
                aria-required="true"
                aria-describedby="regionError"
              />
              <div id="regionError" class="invalid-feedback" role="alert"></div>
            </div>

            <!-- Fecha de nacimiento -->
            <div class="mb-3">
              <label for="fechaNacimiento" class="form-label"
                >Fecha de nacimiento *</label
              >
              <input
                type="date"
                class="form-control"
                id="fechaNacimiento"
                name="fechaNacimiento"
                required
                aria-required="true"
                aria-describedby="fechaNacimientoError"
              />
              <div
                id="fechaNacimientoError"
                class="invalid-feedback"
                role="alert"
              ></div>
            </div>

            <!-- Dirección -->
            <div class="mb-3">
              <label for="direccion" class="form-label">Dirección *</label>
              <textarea
                class="form-control"
                id="direccion"
                name="direccion"
                rows="2"
                required
                aria-required="true"
                aria-describedby="direccionError"
              ></textarea>
              <div
                id="direccionError"
                class="invalid-feedback"
                role="alert"
              ></div>
            </div>

            <!-- Email -->
            <div class="mb-3">
              <label for="email" class="form-label">Correo electrónico *</label>
              <input
                type="email"
                class="form-control"
                id="email"
                name="email"
                required
                aria-required="true"
                aria-describedby="emailHelp emailError"
                autocomplete="email"
              />
              <div id="emailHelp" class="form-text">
                Introduce un correo válido
              </div>
              <div id="emailError" class="invalid-feedback" role="alert"></div>
            </div>

            <!-- Confirmar email -->
            <div class="mb-3">
              <label for="confirmarEmail" class="form-label"
                >Confirmar correo electrónico *</label
              >
              <input
                type="email"
                class="form-control"
                id="confirmarEmail"
                name="confirmarEmail"
                required
                aria-required="true"
                aria-describedby="confirmarEmailError"
                autocomplete="email"
              />
              <div
                id="confirmarEmailError"
                class="invalid-feedback"
                role="alert"
              ></div>
            </div>

            <!-- Contraseña -->
            <div class="mb-3">
              <label for="password" class="form-label">Contraseña *</label>
              <div class="position-relative">
                <input
                  type="password"
                  class="form-control"
                  id="password"
                  name="password"
                  minlength="8"
                  required
                  aria-required="true"
                  aria-describedby="passwordHelp passwordError"
                  autocomplete="new-password"
                />
                <button
                  type="button"
                  class="btn btn-outline-secondary position-absolute end-0 top-0 h-100 d-flex align-items-center toggle-password"
                  tabindex="0"
                  aria-label="Mostrar u ocultar contraseña"
                  data-target="password"
                  style="
                    border-top-left-radius: 0;
                    border-bottom-left-radius: 0;
                  "
                >
                  <i class="bi bi-eye" id="togglePasswordIcon1"></i>
                </button>
              </div>
              <div id="passwordHelp" class="form-text">Mínimo 8 caracteres</div>
              <div
                id="passwordError"
                class="invalid-feedback"
                role="alert"
              ></div>
            </div>

            <!-- Confirmar contraseña -->
            <div class="mb-3">
              <label for="confirmarPassword" class="form-label"
                >Confirmar contraseña *</label
              >
              <div class="position-relative">
                <input
                  type="password"
                  class="form-control"
                  id="confirmarPassword"
                  name="confirmarPassword"
                  minlength="8"
                  required
                  aria-required="true"
                  aria-describedby="confirmarPasswordError"
                  autocomplete="new-password"
                />
                <button
                  type="button"
                  class="btn btn-outline-secondary position-absolute end-0 top-0 h-100 d-flex align-items-center toggle-password"
                  tabindex="0"
                  aria-label="Mostrar u ocultar contraseña"
                  data-target="confirmarPassword"
                  style="
                    border-top-left-radius: 0;
                    border-bottom-left-radius: 0;
                  "
                >
                  <i class="bi bi-eye" id="togglePasswordIcon2"></i>
                </button>
              </div>
              <div
                id="confirmarPasswordError"
                class="invalid-feedback"
                role="alert"
              ></div>
            </div>

            <!-- CAPTCHA simulado -->
            <div class="mb-4">
              <label class="form-label">Verificación *</label>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="captcha"
                  required
                  aria-required="true"
                  aria-describedby="captchaError"
                />
                <label class="form-check-label" for="captcha"
                  >No soy un robot</label
                >
              </div>
              <div
                id="captchaError"
                class="invalid-feedback"
                role="alert"
              ></div>
            </div>

              <!-- Botón de envío -->
              <div class="d-grid">
                <button type="submit" class="registro-btn">Registrarse</button>
              </div>

            </form>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer dinámico -->
    <div id="footer-placeholder"></div>

    <!-- Scripts -->
    <script src="../js/loadComponents.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/validacion-registro.js"></script>
    <script>
      // Lógica para mostrar/ocultar contraseña
      document.querySelectorAll(".toggle-password").forEach((btn) => {
        btn.addEventListener("click", function () {
          const targetId = this.getAttribute("data-target");
          const input = document.getElementById(targetId);
          const icon = this.querySelector("i");
          if (input.type === "password") {
            input.type = "text";
            icon.classList.remove("bi-eye");
            icon.classList.add("bi-eye-slash");
          } else {
            input.type = "password";
            icon.classList.remove("bi-eye-slash");
            icon.classList.add("bi-eye");
          }
        });
      });
    </script>
  </body>
</html>
